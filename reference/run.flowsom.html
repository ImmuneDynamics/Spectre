<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Run FlowSOM — run.flowsom • Spectre</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Run FlowSOM — run.flowsom"><meta name="description" content='Method to run the FlowSOM clustering algorithm.
This function runs FlowSOM on a data.table with cells (rows) vs markers
(columns) with new columns for FlowSOM clusters and metaclusters.
Output data will be "flowsom.res.original" (for clusters) and
"flowsom.res.meta" (for metaclusters).
Uses the R packages "FlowSOM" for clustering, "flowCore" for handling
.fcs files, "Biobase" for creating a flow frame, "data.table" for
handling data.table format.'><meta property="og:description" content='Method to run the FlowSOM clustering algorithm.
This function runs FlowSOM on a data.table with cells (rows) vs markers
(columns) with new columns for FlowSOM clusters and metaclusters.
Output data will be "flowsom.res.original" (for clusters) and
"flowsom.res.meta" (for metaclusters).
Uses the R packages "FlowSOM" for clustering, "flowCore" for handling
.fcs files, "Biobase" for creating a flow frame, "data.table" for
handling data.table format.'></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">Spectre</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.3.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/basics_guide.html">Spectre basics guide</a></li>
    <li><a class="dropdown-item" href="../articles/data_prep.html">Preparing data for analysis with Spectre</a></li>
    <li><a class="dropdown-item" href="../articles/data_transformation.html">Data transformation</a></li>
    <li><a class="dropdown-item" href="../articles/Installation.html">Spectre installation and getting started guide</a></li>
    <li><a class="dropdown-item" href="../articles/simple_discovery.html">Spectre - simple discovery workflow</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ImmuneDynamics/Spectre/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Run FlowSOM</h1>
      <small class="dont-index">Source: <a href="https://github.com/ImmuneDynamics/Spectre/blob/master/R/run.flowsom.R" class="external-link"><code>R/run.flowsom.R</code></a></small>
      <div class="d-none name"><code>run.flowsom.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Method to run the FlowSOM clustering algorithm.
This function runs FlowSOM on a data.table with cells (rows) vs markers
(columns) with new columns for FlowSOM clusters and metaclusters.
Output data will be "flowsom.res.original" (for clusters) and
"flowsom.res.meta" (for metaclusters).
Uses the R packages "FlowSOM" for clustering, "flowCore" for handling
.fcs files, "Biobase" for creating a flow frame, "data.table" for
handling data.table format.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">run.flowsom</span><span class="op">(</span><span class="va">dat</span>, <span class="va">use.cols</span>, xdim<span class="op">=</span><span class="fl">14</span>, ydim<span class="op">=</span><span class="fl">14</span>, meta.k<span class="op">=</span><span class="st">'auto'</span>, </span>
<span>max.meta<span class="op">=</span><span class="fl">20</span>, clust.seed<span class="op">=</span><span class="fl">42</span>, meta.seed<span class="op">=</span><span class="fl">42</span>, clust.name<span class="op">=</span><span class="st">"FlowSOM_cluster"</span>, </span>
<span>meta.clust.name<span class="op">=</span><span class="st">"FlowSOM_metacluster"</span>, mem.ctrl<span class="op">=</span><span class="cn">TRUE</span>, verbose<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-dat">dat<a class="anchor" aria-label="anchor" href="#arg-dat"></a></dt>
<dd><p>NO DEFAULT. data.frame. Input sample.</p></dd>


<dt id="arg-use-cols">use.cols<a class="anchor" aria-label="anchor" href="#arg-use-cols"></a></dt>
<dd><p>NO DEFAULT. Vector of column names to use for clustering.</p></dd>


<dt id="arg-xdim">xdim<a class="anchor" aria-label="anchor" href="#arg-xdim"></a></dt>
<dd><p>DEFAULT = 14. Numeric. Number of first level clusters across
the x-axis. xdim x ydim = total number of first level FlowSOM clusters.</p></dd>


<dt id="arg-ydim">ydim<a class="anchor" aria-label="anchor" href="#arg-ydim"></a></dt>
<dd><p>DEFAULT = 14. Numeric. Number of first level clusters across
the y-axis. xdim x ydim = total number of first level FlowSOM clusters.</p></dd>


<dt id="arg-meta-k">meta.k<a class="anchor" aria-label="anchor" href="#arg-meta-k"></a></dt>
<dd><p>DEFAULT = 'auto'. If set to 'auto', then number of
metaclusters will be determined automatically. Alternatively, can specify
the desired number of metaclusters to create. If set to zero (0),
no metaclusters will be created.</p></dd>


<dt id="arg-max-meta">max.meta<a class="anchor" aria-label="anchor" href="#arg-max-meta"></a></dt>
<dd><p>DEFAULT = 20. Only used if meta.k is set to 'auto'.
This parameter indicates the maximum number of metaclusters FlowSOM will
try out when determining the optimal number of metaclusters for the dataset.</p></dd>


<dt id="arg-clust-seed">clust.seed<a class="anchor" aria-label="anchor" href="#arg-clust-seed"></a></dt>
<dd><p>DEFAULT = 42 Numeric. Clustering seed for reproducibility.</p></dd>


<dt id="arg-meta-seed">meta.seed<a class="anchor" aria-label="anchor" href="#arg-meta-seed"></a></dt>
<dd><p>DEFAULT = 42 Numeric. Metaclustering seed for
reproducibility.</p></dd>


<dt id="arg-clust-name">clust.name<a class="anchor" aria-label="anchor" href="#arg-clust-name"></a></dt>
<dd><p>DEFAULT = "FlowSOM_cluster". Character. Name of the
resulting 'cluster' parameter.</p></dd>


<dt id="arg-meta-clust-name">meta.clust.name<a class="anchor" aria-label="anchor" href="#arg-meta-clust-name"></a></dt>
<dd><p>DEFAULT = "FlowSOM_metacluster". Character.
Name of the resulting 'metacluster' parameter.</p></dd>


<dt id="arg-mem-ctrl">mem.ctrl<a class="anchor" aria-label="anchor" href="#arg-mem-ctrl"></a></dt>
<dd><p>DEFAULT = TRUE. Runs gc() (garbage collection) after a
number of steps to free up memory that hasn't been released quickly enough.</p></dd>


<dt id="arg-verbose">verbose<a class="anchor" aria-label="anchor" href="#arg-verbose"></a></dt>
<dd><p>DEFAULT = TRUE. Logical. Whether to print progress messages.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Thomas Ashhurst, <a href="mailto:thomas.ashhurst@sydney.edu.au">thomas.ashhurst@sydney.edu.au</a>
Felix Marsh-Wakefield, <a href="mailto:felix.marsh-wakefield@sydney.edu.au">felix.marsh-wakefield@sydney.edu.au</a></p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Run FlowSOM on demonstration dataset</span></span></span>
<span class="r-in"><span><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu">Spectre</span><span class="fu">::</span><span class="fu">run.flowsom</span><span class="op">(</span><span class="fu">Spectre</span><span class="fu">::</span><span class="va"><a href="demo.clustered.html">demo.clustered</a></span>,</span></span>
<span class="r-in"><span>use.cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"NK11_asinh"</span>, <span class="st">"CD3_asinh"</span>, </span></span>
<span class="r-in"><span><span class="st">"CD45_asinh"</span>, <span class="st">"Ly6G_asinh"</span>, <span class="st">"CD11b_asinh"</span>, </span></span>
<span class="r-in"><span><span class="st">"B220_asinh"</span>, <span class="st">"CD8a_asinh"</span>, <span class="st">"Ly6C_asinh"</span>, </span></span>
<span class="r-in"><span><span class="st">"CD4_asinh"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Preparing data</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Starting FlowSOM</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Freeing up memory</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Building SOM</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Mapping data to SOM</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Building MST</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Adding cluster labels to input dataset</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Column 'FlowSOM_cluster' already exists and will be replaced.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Starting metaclustering</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Adding metacluster labels to input dataset</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Column 'FlowSOM_metacluster' already exists and will be replaced.</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Thomas Ashhurst, Felix Marsh-Wakefield, Givanna Putri.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

